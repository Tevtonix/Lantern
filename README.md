# Lantern
## Требования

### Функциональные требования

**Основные функции:**

- Система должна предоставлять API для регистрации и авторизации пользователей.
- Пользователь должен иметь возможность зарегистрироваться, используя email и пароль.
- Система должна поддерживать двухфакторную аутентификацию для повышения безопасности пользователей.

**Пользовательские сценарии:**

- Пользователь отправляет команду `/weather Москва`, система возвращает текущую температуру и описание погоды.
- Пользователь может зарегистрироваться, указав email и пароль, и затем войти в систему с использованием этих данных.

**Обработка ошибок:**

- Если введен неверный город, система должна вернуть HTTP-код 404 и сообщение "Город не найден".
- При ошибке аутентификации система возвращает код 401 и сообщение "Неверный email или пароль".

### Нефункциональные требования

**Производительность:**

- Время ответа API не должно превышать 200 мс для 95% запросов.

**Масштабируемость:**

- Система должна поддерживать горизонтальное масштабирование и использовать Kubernetes для управления контейнерами.

**Безопасность:**

- Все данные должны передаваться по HTTPS.
- Система должна поддерживать двухфакторную аутентификацию для администраторов.

**Доступность:**

- Система должна быть доступна 99.9% времени (время простоя не более 43 минут в год).

**Совместимость:**

- Система должна поддерживать интеграцию с другими сервисами через REST API.
- Совместимость с браузерами Chrome, Firefox и Safari.

## Спецификации

### Архитектура

**Общее описание:**

Система состоит из нескольких компонентов: API Gateway, User Service и Database.

**Компоненты:**

- **API Gateway** — маршрутизирует запросы к соответствующим сервисам.
- **User Service** — управляет данными пользователей и их аутентификацией.
- **Database** — хранит данные пользователей и другие связанные данные.

### Технологии

**Языки программирования:**

- Python, JavaScript.

**Фреймворки и библиотеки:**

- Flask для разработки API.
- React для фронтенда.
- SQLAlchemy для работы с базой данных.

**Базы данных:**

- PostgreSQL для хранения данных пользователей.
- Redis для кэширования.

**Инфраструктура:**

- Docker для контейнеризации.
- Kubernetes для оркестрации.

### API

**Эндпоинты:**

- `POST /auth/login` — принимает email и пароль, возвращает JWT-токен.
- `GET /weather` — возвращает текущую погоду для указанного города.

**Форматы данных:**

- Запрос: `{'email': 'user@example.com', 'password': '123456'}`.
- Ответ: `{'token': 'jwt-token'}`.

**Коды ошибок:**

- 400 — Неверный запрос.
- 404 — Ресурс не найден.
- 401 — Неавторизованный доступ.
- 500 — Внутренняя ошибка сервера.

### Ограничения

**Технические ограничения:**

- Система поддерживает только HTTP/1.1.
- Максимальный размер запроса — 10 МБ.

**Ограничения по данным:**

- Максимальное количество пользователей — 1 000 000.

### Зависимости

**Внешние зависимости:**

- OpenWeatherMap API для получения данных о погоде.
- Stripe API для обработки платежей.

**Внутренние зависимости:**

- User Service зависит от Auth Service для аутентификации.
- API Gateway зависит от User Service для получения данных о пользователях.
